# template page with search and dictionary
데브옵스가 제공해줄 수 있는 모든 것을 템플릿에 담고 싶다
- **템플릿 쉽게 저장하고 가져오기**
- **검색을 자유롭게 할 수 있도록**
- **단어 사전으로 정보 집적하기**

템플릿 페이지를 단어사전과 결합
경험으로 쌓은 리소스가 자산이 되어야 한다

#### 템플릿으로 제공될 것
- docker file
- workflow
- web server (api endpoint, documentation, logging)
- 여러가지 앱들(이미 올라와 있는 이미지)을 선택해서 템플릿을 만들도록 해야함
- github repository
- 너무 많은 뼈대는 성가시다
    - 스켈레톤 버전, 최적화 버전, 배포용 버전, 실제 사용 버전 정도는 구분하자

#### 프로덕션에서 추가될 것
- 보안
- helm 으로 애플리케이션화
- 경량화

## 데이터 형식
- 템플릿 데이터, 태그 데이터
```
- 템플릿 데이터
    - 파일명
    - *이름*
    - 내용
    - 생성시간
    - 수정시간
    - 사용횟수
- 태그 데이터
    - *이름* (템플릿 데이터의 이름과 연결)
    - 태그 리스트[]
    - 시간
```
- [ ] 템플릿 데이터에 태그를 안붙여도 검색되도록
    - es 에서 유의어, 음절에 따라 결과를 받아와서, 그 결과를 db에서 다시 호출?
    - 아니면 es 안에서 다 해결?
        - 로그 검색용으로 주로 쓰이는데, 데이터를 다 밀어넣고 그 안에서 검색한다
    - 아니면 db 에서 다 해결 가능? db에서 인덱싱은 있긴 있는데, 유의어는
      서버 로직으로 해야하고, 로직 구현보다 es를 이용하는게 더 효과적이겠다
- 데이터를 es에 다 넣되, 인덱스를 다르게 쓰고 직렬화해서 다 밀어넣어 써도 될까
    - db라면 테이블을 다르게 쓰는 느낌
- es 를 쓰는 것이 다양한 결과를 보여주기 위함이다.
    - 유의어 사전, 형태소 분석
    - name 값만 가지고 name만 리턴해주면 될까
    - 내용도 같이 분석해서 결과값을 보여줘야하니까 내용도 집어넣어야 되네
        - 그러면 name 하고, 전체를 묶은 것으로 넣으면 될까
    - 결과값은 어차피 name으로 리턴해준다.
- redis나 es나 dynamodb나 테이블 + 데이터 형식으로 범용적인 crud를 구현하고 싶다
    - 그러면 인자를 table, interface로 받으면 되겠네
- 데이터는 어차피 정적인 것을 파싱해서 불러오는 방식이다.
    - 그러면 호출을 잦게 할 필요가 없다.
    - 자료 수가 엄청나게 많은 것도 아니다(1억건까지 생길 일이 없음)
    - redis, es에 모두 쏟아넣고 불러와도 된다
    - react에서도 한번만 호출해서 잘 나눠 쓰면 된다
        - 지금 호출하는 곳이 dictionary도 있기 때문에 하나가 늘은 것
        - 마이크로 서비스처럼 쓰려면 호출하는 장소를 나눠도 되겠지만, 지금은
          하나의 역할을 하는 수준이다. 정렬도 react에서 처리해도 된다
    - 근데 마이크로서비스를 쓴다 생각하고 확장성 있는 서비스로 만들고 싶기도
      한데
        - selection은 그대로 놔두고, 정렬해서 보여주는 창을 새로 만들자

## 템플릿 페이지 제작
- [X] 체크박스 선택해서 선택한 것들 출력하도록 하기
- [X] 체크박스에 값을 외부에서 받아와서 보여주기
- [X] 리스트에 없는 것들 추가를 위해 추가요청 기능
    - [X] 버튼 만들기
    - [X] 추가 요청 받으면 특정 변수에 쌓아 놓고
    - [X] 변수에 있는 것을 DB에 따로 저장해 나중에 볼 수 있도록
- [X] tag 추가 삭제 보기
- [X] 라우팅
- [X] 파일에서 workflow snippet 가져오기
    - [X] 데이터를 redis에 넣을지, es에서 테스트해볼지
        - [X] redis로 바로 하자
- [ ] 태그별 정렬, 각 속성값별 정렬, 큐레이션, 유의어, 시간, 공간
    - [X] 시간으로 보여주는 화면 만들기
        - [X] 데이터를 프론트에 가져온 것을 이용해서 재가공?
              백엔드에서 처리 된 데이터를 그냥 가져오기?
              단순 정렬은 프론트에서 처리하는게 호출 수를 줄일 수 있겠다
- [ ] 유저 접근 포인트를 redis로 해서 redis 안에서 es를 호출하도록 할지,
      반대로 es에서 받아서 redis에서 값을 받은 후 리턴해줄지.
    - [ ] redis로 검색해서 es의 값을 받아서 다시 검색?
- [X] 검색어를 쌓아서 검색하는 도구 추가하면 좋겠다
- [X] es에 데이터 넣고 중첩 데이터 검색 테스트
- [ ] tag update 동작 하면 requested data 없애기
- [ ] 서버 분리하고 배포하기
    helm을 클론해서 아르고cd로 배포하면 될듯?
    - [ ] redis 에 지금 두개의 태그가 있는데 이걸 하나로 줄이고, 대신 도커로
          다른 태그를 받는 형태로 만들면 모듈화가 잘 되겠다. 그러면 다음에 api
          endpoint로 쓸 수 있고,
        - [ ] 현재 작업 저장해놓고, 5개 api만 남기고, docker에서 environment
              받아서 태그 주도록 한다
- [.] 디자인 수정
    - [X] square 바뀜
    - [ ] dictionary 팝업으로 수정
    - [ ] 사각형 입체적으로 표현
- [ ] 데이터 파싱하는 클라이언트 툴 만들기
- [ ] 데이터 스트럭처와 그냥 이름만 있는 데이터를 잘 구분해서 전달해야한다


## 추가 필요
- [ ] write file 줄 변경 확인
- [ ] 지금 파일에 쓰는거는 기존거 + 현재 데이터, es에 업데이트는 기존거를 그냥
      덮는다. 통일 시켜야 함. js에서 데이터를 어떻게 넘겨줄지에 맞추는데, 새
      데이터만 넘어가게 한다.
- [ ] client 검색 로직 개선
- [ ] tag를 텍스트에 합쳐서 형식을 정해서 XXXXXX, json 형식으로 데이터
      관리하되 DB에 넣을때만 직렬화한다
- [ ] 데이터를 하루에 한번 정적파일화 해서 빌드하기 (사이즈 상한을 생각해야겠다)
- [ ] redis를 큐로 써서 구독해서 정보 찾도록 해보기
- [ ] golang append to dictionary에서 지금은 전체 파일을 수정하는데, 특정 줄만
      수정하도록 수정해야함
- [ ] elasticsearch 켜지는데 시간 걸려서 dict server를 재시작해줘야 한다
- [ ] 파일 업로드는 어떻게 하나, 폼에서? 폴더를 파싱해서? 드래그 앤 드롭?
- [ ] es 에 redis의 목록을 넣는다(이름만)
    - [ ] 단어 사전 형태로 태그 데이터 만들기
        - [ ] 메인 데이터: 태그, 태그:태그1, 태그2, 태그가 연결되있으면 데이터 검색
    - [ ] 데이터를 푸시해주는 서비스가 따로 있어야하나
          github에서 푸시해주면 될 것 같은데. 그러면 서버리스 함수로
          만들어야겠다
- [ ] 프론트에 제공할 객체 어떤 것들이 있는지 보는 페이지가 필요하다
- [X] 값에 공백 있을 때 처리 방법 확인 필요


#### 고려사항
- 기존에 있는 프로젝트에 추가도 되면 좋겠다
- 최종 결과물을 스크립트로 만들까, 압축파일로 만들까


#### 제한
- 외부 라이브러리를 최대한 적게


#### etc
github의 템플릿 기능이 있어서 새 레파지토리 만들 때 참조할 수 있게 되있는데 이걸 이용할 때는 너무 많은 것보다 issue, pr template 정도만 있어야 되겠다

netlify 로 페이지 내에서 수정되도록 할 수 있나?

api 호출은 되니까
dynamodb 같은 거에 저장해놓고 람다로 함수 실행하는 api 만들면 되겠다

리액트로 페이지에서 바로 수정  가능하게 예쁘게 인터랙티브하게 하고, 수정하면 바로 데이터베이스에서 가져오도록

비슷한 말
boilerplate, skeleton, scaffold

#### workflow
github workflow를 레포지토리에 추가 안해도 되도록 하는 방법 찾기
- 프로젝트별로 단일 레포지토리를 쓰고, 인프라 코드도 같이 넣으면 되긴 한다
- 만약 분리된다면?

인프라 코드, 배포 코드, api 미들웨어는 개발자가 몰라도 된다.
비즈니스 로직에 집중하고, 나머지 편의는 자동 적용되도록 하면 좋겠다.
- 근데 이러면 좋은 프레임워크를 쓰는게 낫지 않나?
- 가벼워야 한다.
- 개발자 뿐 아니라, 다른 팀들도 접근 및 관리가 쉬워야 한다.
    - 운영 중인 서버에 접근해서 뭔가를 확인하는 것이 쉬워야하고,
    - 운영 중인 서버를 복사해서 스테이지 서버로 테스트하는 것도 쉬워야 한다.

처음 프로젝트 시작 시, 회사의 자원들을 쉽게 사용할 수 있어야 한다
레포지토리 만드는 것을 스케폴딩 되있는 것을 가져와서 쓰도록 해도 될까?
docker-compose, workflow를 자동으로 포함한 레포를 생성해서 회사에서 쓰는
이미지를 받아와서 개발 후 푸시하면 프로젝트별 이미지가 새로 생성되도록 하고,
redis 같은 이미지는 회사에서 쓰던 옵션을 그대로 가져와서 쓸 수 있도록.

기존 작업을 개선하고 싶을 때는, 이미지를 이용해 기존 자원을 교체하고,
워크플로우를 마이그레이션하는 작업이 필요하다

- 각자에 맞게 리소스를 보관하고 쉽게 찾아보는 서비스
나의 리소스는 공개

#### 문맥 사전 구축
이 단어는 이렇게도 검색 가능해요 라는 걸 보여주는 페이지
중앙집적형 위키도 만들어놔야겠다

elastic 형태소 분석기
NLP
Word2vec

단어가 등록되면 네이버 같은데서 유의어를 긁어오는 작업도 하면 좋겠다
